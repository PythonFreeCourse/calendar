{% extends "base.html" %}

{% block content %}

    <div class="container mt-4">

        <h1>{{weekly_task.id}}</h1>
        {% if mode == "edit" %}
            <h1>Edit Weekly Tasks</h1>

            {% set weekly_task_id = weekly_task.id %}
            
        {% else %}
            <h1>Add Weekly Tasks</h1>

            {% set weekly_task_id = "0" %}

        {% endif %}
    </div>

    {% if massage %}
        <div class="alert alert-danger container mt-4" role="alert">
            {{ massage }}
        </div>
    {% endif %}

    <!-- set all the 'checked' if weekly task exists -->
    {% if weekly_task %}
        {% if "Sun" in weekly_task.days %}
            {% set c_sun = "checked" %}
        {% endif %}

        {% if "Mon" in weekly_task.days %}
            {% set c_mon = "checked" %}
        {% endif %}

        {% if "Tue" in weekly_task.days %}
            {% set c_tue = "checked" %}
        {% endif %}

        {% if "Wed" in weekly_task.days %}
            {% set c_wed = "checked" %}
        {% endif %}

        {% if "Thu" in weekly_task.days %}
            {% set c_thu = "checked" %}
        {% endif %}

        {% if "Fri" in weekly_task.days %}
            {% set c_fri = "checked" %}
        {% endif %}

        {% if "Sat" in weekly_task.days %}
            {% set c_sat = "checked" %}
        {% endif %}

        {% if weekly_task.is_important %}
            {% set is_important = "checked" %}
        {% endif %}
    {% endif %}
    <!-- end set -->
    

    <form class="container mt-5" action="{{ url_for('weekly_task_make_change') }}" method="post">
        <div class="mb-3">
            <label for="title" class="form-label">Title:</label>
            <input type="text" class="form-control" value="{{ weekly_task.title }}" id="title" name="title" aria-describedby="emailHelp">
        </div>

        <label for="days" class="form-label">Repeat Days:</label>


        <div id="days">
            <ul class="list-group">
                <li class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="True" name="sun" {{ c_sun }}>
                    Sunday
                </li>
                <li class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="True" name="mon" {{ c_mon }}>
                    Monday
                </li>
                <li class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="True" name="tue" {{ c_tue }}>
                    Tuesday
                </li>
                <li class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="True" name="wed" {{ c_wed }}>
                    Wednesday
                </li>
                <li class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="True" name="thu" {{ c_thu }}>
                    Thursday
                </li>
                <li class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="True" name="fri" {{ c_fri }}>
                    Friday
                </li>
                <li class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="True" name="sat" {{ c_sat }}>
                    Saturday
                </li>
            </ul>
        </div>

        <div class="mb-3">
            <label for="the_time" class="form-label">Time Of The Day:</label>
            <input type="time" class="form-control" value="{{ weekly_task.the_time }}" id="the_time" name="the_time">
        </div>

        <div class="input-group">
            <span class="input-group-text">Description:</span>
            <textarea class="form-control" aria-label="content" id="content" name="content">{{ weekly_task.content }}</textarea>
        </div>


        <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" id="is_important" name="is_important" {{is_important}}>
            <label class="form-check-label" for="is_important">Important</label>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
        

        
        <input type="hidden" name="weekly_task_id" value="{{ weekly_task_id }}">
        <input type="hidden" name="mode" value="{{ mode }}">

    </form>

{% endblock %}